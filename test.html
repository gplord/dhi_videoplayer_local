<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Comparative Japanese Film Archive - Proof of Concept</title>

<link href="style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen" />
<link rel="stylesheet" href="video-js.css" type="text/css" media="screen" title="Video JS">

<script src="js/jquery-1.7.1.min.js"></script>
<script src="js/jquery.lightbox-0.5.min.js"></script>

<script type="text/javascript">
	// Must come after the video.js library

	// Add VideoJS to all video tags on the page when the DOM is ready
	//VideoJS.setupAllWhenReady();

	var highlightedLine = 0;

	function goToLine(num) {
		$("#tLine"+highlightedLine).toggleClass('highlighted');
		highlightedLine = num;
		$("#tLine"+highlightedLine).toggleClass('highlighted');
		$("#rolling_transcript").scrollTop(0);
		var pos = $("#tLine"+num).position().top;
		$("#rolling_transcript").scrollTop(pos);
	}

</script>

<script>

	function loadXMLDoc(dname) {
		if (window.XMLHttpRequest) {
			xhttp=new XMLHttpRequest();
		} else {
			xhttp=new ActiveXObject("Microsoft.XMLHTTP");
		}
		xhttp.open("GET",dname,false);
		xhttp.send("");
		return xhttp.responseXML;
	}

	function displayResult() {
		xml=loadXMLDoc("datatest.xml");
		xsl=loadXMLDoc("transcript.xsl");

		// code for IE
		if (window.ActiveXObject) {
		ex=xml.transformNode(xsl);
		document.getElementById("rolling_transcript").innerHTML=ex;
	}

	// code for Mozilla, Firefox, Opera, etc.
	else if (document.implementation && document.implementation.createDocument)	{
		xsltProcessor=new XSLTProcessor();
		xsltProcessor.importStylesheet(xsl);
		resultDocument = xsltProcessor.transformToFragment(xml,document);
		document.getElementById("rolling_transcript").appendChild(resultDocument);
	}

	// After parsing XML, provide click function for each transcript line group set
	$(".transcriptLineGroup").click(function() {
		var timeInMs = this.getAttribute("data-time-in-ms");		
		var video = document.getElementsByTagName("video")[0];
		video.currentTime = timeInMs; 
		video.play();
	});

}

</script>
</head>

<body onload="displayResult()">	

<section id="wrapper">

	<header>

		<div id="title">
			<ul id="nav">
				<li><a href="about.html">About</a></li>
				<li><a href="index.html">Demo</a></li>
				<li><a href="team.html">Project Team</a></li>
				<li><a href="contact.html">Contact</a></li>
			</ul>
		</div>

	</header>

	<div id="titlebar">
		<a id="metadata">Download Metadata <small>[XSLX, 134kb]</a>
		<h2>The Cabinet of Dr. Caligari</h2>
	</div>

	<!-- Start Left Column -->
	<div id="leftcontent">
		<article id="videobox">





			<!-- Begin VideoJS -->
			<div class="video-js-box">

				<video id="video" class="video-js" width="320" height="240" controls poster="images/poster.jpg">
					<source src="caligari_1_vas.mov">
				</video>				

			</div>
			<!-- End VideoJS -->







		</article>

		<aside id="sources">

			<h3>Footnotes &amp; Annotations</h3>
			<img src="images/video.png" alt="video" class="icons">
			<div class="content" id="footnote"><div class="overlay"></div><div class="inactive"></div></div>
		</aside>

	</div>

<!-- Start Right Column -->

	<div id="rightcontent">


		<aside id="sources">
			<h4>Transcription</h4>

			<div class="content" id="videoattribution">
				<img src="images/notes.png" alt="notes" class="icons">
				<div class="overlay"></div>
				<div class="inactive">
				</div>
			</div>
		</aside>

		<div id="rolling_transcript"></div>

	</div>

	
	<footer>Proof of concept for the <a href="http://www.dhinitiative.org">Digital Humanities Inititiave (DHi)<a/> <img style="float: right;" src="images/dhi_logo.png" /><div style="clear: both"></div></footer>
		
</section>

</body>
</html>


